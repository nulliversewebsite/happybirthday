<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy Birthday Mona üéÇ</title>
  <style>
    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial}
    #canvas-wrap{width:100%;height:100%;position:relative;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,#fff8fb 0%, #fffefc 40%, #f0f9ff 100%)}
    canvas{display:block}
    .ui {
      position:absolute;left:50%;transform:translateX(-50%);bottom:32px;text-align:center;pointer-events:auto;
      user-select:none
    }
    .title {
      font-size:22px;color:#5a2b73;font-weight:700;text-shadow:0 6px 18px rgba(90,43,115,0.12)
    }
    .subtitle{font-size:14px;color:#6c4a8a;margin-top:6px}
    .btn{margin-top:10px;padding:8px 14px;border-radius:999px;border:none;background:#ff6b9a;color:white;font-weight:600;cursor:pointer}
    .hint{position:absolute;top:18px;left:18px;color:#6b4b88;font-size:13px}
    @media (max-width:600px){.title{font-size:18px}.subtitle{font-size:13px}}
  </style>
</head>
<body>
  <div id="canvas-wrap">
    <!-- <div class="hint">Open this file in a browser ‚Äî the cake gently floats ‚ú®</div> -->
    <div id="three-root"></div>

    <div class="ui">
      <div class="title">Happy birthday my baby ‚Äî <span style="color:#ff3d7a">Mona</span> üéâ</div>
      <div class="subtitle" style="background:white;">A special cake just for you üíï, semoga adek panjang umur, dan segala kebaikan akan datang untuk adek. Selalu diberi keselamatan kebahagiaan, mas doakan yang terbaik untuk sempronya lancar love you baby, thank you for everything üíï</div>
    </div>
  </div>

  <script src="https://unpkg.com/three@0.152.2/build/three.min.js"></script>
  <script>
  (function(){
    const root = document.getElementById('three-root');
    const scene = new THREE.Scene();
    const renderer = new THREE.WebGLRenderer({antialias:true, alpha:true});
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    renderer.setSize(window.innerWidth, window.innerHeight);
    root.appendChild(renderer.domElement);

    const camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, 0.1, 100);
    camera.position.set(0, 3.5, 6);

    const hemi = new THREE.HemisphereLight(0xffffee, 0x7777aa, 0.9);
    scene.add(hemi);
    const key = new THREE.DirectionalLight(0xffffff, 0.9);
    key.position.set(5,8,2);
    scene.add(key);

    const cake = new THREE.Group();

    function makeCakeLayer(radius, height, color, y){
      const geo = new THREE.CylinderGeometry(radius, radius, height, 64);
      const mat = new THREE.MeshStandardMaterial({color: color, metalness:0.05, roughness:0.6});
      const mesh = new THREE.Mesh(geo, mat);
      mesh.position.y = y;
      return mesh;
    }

    const plateGeo = new THREE.CylinderGeometry(3.2,3.2,0.12,64);
    const plateMat = new THREE.MeshStandardMaterial({color:0xfff1f6, roughness:0.9});
    const plate = new THREE.Mesh(plateGeo, plateMat);
    plate.position.y = -0.06;
    scene.add(plate);

    const layer1 = makeCakeLayer(2.1, 0.9, 0xffd6e8, 0.45);
    const layer2 = makeCakeLayer(1.6, 0.8, 0xffffff, 1.1);
    const layer3 = makeCakeLayer(1.05, 0.7, 0xffe7f2, 1.7);

    cake.add(layer1, layer2, layer3);

    function rim(radius, tube, y, color){
      const geo = new THREE.TorusGeometry(radius, tube, 16, 64);
      const mat = new THREE.MeshStandardMaterial({color: color, metalness:0.1, roughness:0.5});
      const m = new THREE.Mesh(geo, mat);
      m.rotation.x = Math.PI/2;
      m.position.y = y;
      return m;
    }
    cake.add(rim(2.05, 0.09, 0.9, 0xff9fcf));
    cake.add(rim(1.55, 0.07, 1.4, 0xffc9e6));
    cake.add(rim(1.05, 0.06, 1.95, 0xff9fcf));

    const sprinkleColors = [0xff6b9a,0xffd166,0x7de1ff,0x9b8cff];
    const sprGroup = new THREE.Group();
    for(let i=0;i<24;i++){
      const a = Math.random()*Math.PI*2;
      const r = 0.3 + Math.random()*0.6;
      const x = Math.cos(a)*r;
      const z = Math.sin(a)*r;
      const y = 2.05 + (Math.random()*0.06-0.02);
      const s = new THREE.Mesh(new THREE.SphereGeometry(0.05,8,8), new THREE.MeshStandardMaterial({color: sprinkleColors[i%sprinkleColors.length], roughness:0.5}));
      s.position.set(x,y,z);
      sprGroup.add(s);
    }
    cake.add(sprGroup);

    const candleGroup = new THREE.Group();
    const candleCount = 5;
    for(let i=0;i<candleCount;i++){
      const ang = (i/(candleCount))*Math.PI*2;
      const rad = 0.6;
      const cx = Math.cos(ang)*rad;
      const cz = Math.sin(ang)*rad;
      const candleMat = new THREE.MeshStandardMaterial({color:0xffffff, roughness:0.6});
      const candle = new THREE.Mesh(new THREE.CylinderGeometry(0.04,0.04,0.46,16), candleMat);
      candle.position.set(cx,2.35,cz);
      candleGroup.add(candle);
      const flame = new THREE.Mesh(new THREE.SphereGeometry(0.06,8,8), new THREE.MeshBasicMaterial({color:0xffb84d}));
      flame.position.set(cx,2.6,cz);
      candleGroup.add(flame);
      const pl = new THREE.PointLight(0xffb36b, 0.5, 2);
      pl.position.set(cx,2.6,cz);
      scene.add(pl);
    }
    cake.add(candleGroup);

    const heartShape = new THREE.Shape();
    heartShape.moveTo(0, 0.25);
    heartShape.bezierCurveTo(0, 0.25, -0.5, 0.9, -1.0, 0.55);
    heartShape.bezierCurveTo(-1.6, 0.12, -0.6, -0.6, 0, -0.1);
    heartShape.bezierCurveTo(0.6, -0.6, 1.6, 0.12, 1.0, 0.55);
    heartShape.bezierCurveTo(0.5, 0.9, 0, 0.25, 0, 0.25);
    const heartGeo = new THREE.ExtrudeGeometry(heartShape, {depth:0.06, bevelEnabled:true, bevelSegments:2, steps:2, bevelSize:0.02, bevelThickness:0.02});
    const heartMat = new THREE.MeshStandardMaterial({color:0xff5c9e, metalness:0.1, roughness:0.45});
    const heart = new THREE.Mesh(heartGeo, heartMat);
    heart.rotation.x = Math.PI;
    heart.scale.set(0.12,0.12,0.12);
    heart.position.set(0,2.15,0);
    cake.add(heart);

    // photo frame above the cake
    const frameGroup = new THREE.Group();
    const frameTex = new THREE.TextureLoader().load('https://nulliversewebsite.github.io/happybirthday/bdubz.jpg');
    frameTex.encoding = THREE.sRGBEncoding;
    frameTex.needsUpdate = true;
    
    const frameMat = new THREE.MeshBasicMaterial({map:frameTex});
    const frameGeo = new THREE.PlaneGeometry(1.2,1.6);
    const photo = new THREE.Mesh(frameGeo, frameMat);

    const borderGeo = new THREE.PlaneGeometry(1.3,1.7);
    const borderMat = new THREE.MeshBasicMaterial({color:0xffc9e6, side:THREE.DoubleSide});
    const border = new THREE.Mesh(borderGeo, borderMat);
    frameGroup.add(border);
    frameGroup.add(photo);
    photo.position.z = 0.001;

    frameGroup.position.set(0,2.9,0);
    frameGroup.rotation.x = 0;

    cake.add(frameGroup);

    function makePlaque(text){
      const c = document.createElement('canvas'); c.width=512; c.height=256;
      const ctx = c.getContext('2d');
      ctx.fillStyle = '#fff8f9';
      ctx.fillRect(0,0,c.width,c.height);
      ctx.fillStyle = '#fff6f8';
      ctx.fillRect(24,24,c.width-48,c.height-48);
      ctx.fillStyle = '#4a2350';
      ctx.textAlign = 'center';
      ctx.font = 'bold 80px serif';
      ctx.fillText(text, c.width/2, c.height/2+8);
      const tex = new THREE.CanvasTexture(c);
      const mat = new THREE.MeshBasicMaterial({map:tex});
      const geo = new THREE.PlaneGeometry(1.4,0.45);
      const mesh = new THREE.Mesh(geo, mat);
      mesh.position.set(0,1.57,1.6);
      mesh.rotation.x = -0.12;
      return mesh;
    }
    cake.add(makePlaque('22th'));

    scene.add(cake);

    const gGeo = new THREE.CircleGeometry(3.8,64);
    const gMat = new THREE.MeshBasicMaterial({color:0xefe8f3});
    const ground = new THREE.Mesh(gGeo,gMat);
    ground.rotation.x = -Math.PI/2;
    ground.position.y = -0.06;
    scene.add(ground);

    const hearts = new THREE.Group();
    function makeHeartSprite(){
      const c = document.createElement('canvas'); c.width=128; c.height=128;
      const ctx = c.getContext('2d');
      ctx.fillStyle = 'rgba(0,0,0,0)'; ctx.fillRect(0,0,128,128);
      ctx.fillStyle = '#ff6b9a';
      ctx.beginPath();
      ctx.moveTo(64,80);
      ctx.bezierCurveTo(64,80,12,40,36,18);
      ctx.bezierCurveTo(52,2,76,18,76,18);
      ctx.bezierCurveTo(100,40,64,80,64,80);
      ctx.fill();
      return new THREE.CanvasTexture(c);
    }
    const heartTex = makeHeartSprite();
    for(let i=0;i<20;i++){
      const m = new THREE.Mesh(new THREE.PlaneGeometry(0.28,0.28), new THREE.MeshBasicMaterial({map:heartTex, transparent:true, opacity:0.9}));
      m.position.set((Math.random()-0.5)*4, 2+Math.random()*1.8, (Math.random()-0.5)*3);
      m.lookAt(camera.position);
      hearts.add(m);
    }
    scene.add(hearts);
    scene.position.y = 2;
    scene.scale.set(0.9, 0.9, 0.9);

    let baseY = cake.position.y;
    let last = 0;
    function animate(t){
      const dt = (t-last)/1000; last = t;
      cake.position.y = baseY + Math.sin(t*0.001)*0.15;
      hearts.children.forEach((h,i)=>{
        h.position.y += Math.sin((t*0.002)+i)*0.002 + 0.0008;
        if(h.position.y > 4) h.position.y = 1.5;
        h.lookAt(camera.position);
      });
      camera.position.y = 3.5 + Math.sin(t*0.001)*0.08;
      renderer.render(scene, camera);
      requestAnimationFrame(animate);
    }
    requestAnimationFrame(animate);

    window.addEventListener('resize', ()=>{
      camera.aspect = window.innerWidth/window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });

    renderer.domElement.addEventListener('dblclick', ()=>{
      if(!document.fullscreenElement) renderer.domElement.requestFullscreen(); else document.exitFullscreen();
    });
  })();
  </script>


  <!-- üéÅ Overlay hadiah -->
<div id="gift-overlay" style="
  position:fixed;
  inset:0;
  background:#fff8fb;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  z-index:9999;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;
">
  <h2 style="color:#6c4a8a;font-size:22px;margin-bottom:20px;">üéÅ Klik untuk buka hadiah üéÅ</h2>
  <button id="open-gift-btn" style="
    padding:10px 20px;
    background:#ff6b9a;
    color:white;
    border:none;
    border-radius:999px;
    font-weight:600;
    font-size:16px;
    cursor:pointer;
    box-shadow:0 4px 10px rgba(0,0,0,0.1);
  ">Buka Hadiah</button>
</div>

<audio id="bg-music" src="https://nulliversewebsite.github.io/happybirthday/Calum Scott - You Are The Reason (Official Video).mp3"></audio> <!-- Ganti dengan link lagu kamu -->

<script>
  const overlay = document.getElementById('gift-overlay');
  const btn = document.getElementById('open-gift-btn');
  const music = document.getElementById('bg-music');

  btn.addEventListener('click', () => {
    overlay.style.transition = 'opacity 0.6s ease';
    overlay.style.opacity = '0';
    setTimeout(() => overlay.style.display = 'none', 600);
    music.currentTime = 16
    music.play().catch(() => console.log('User interaction required for autoplay.'));
  });
</script>



</body>
</html>



